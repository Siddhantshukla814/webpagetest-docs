const t=(t,e,r)=>new Response(t,{headers:{"content-type":1===e?"application/json":"text/html","Cache-Control":0===r?"max-age=31556952,immutable":"no-store"}}),e=new Map,r=t=>{const r=t.data,n=e.get(r.A);n&&(e.delete(r.A),clearTimeout(n[1]),n[0](r))},n=(t,e)=>({K:t.K,A:t.A,H:[],n:[e]});(s=>{s.oninstall=()=>s.skipWaiting(),s.onactivate=()=>s.clients.claim(),s.onmessage=r,s.onfetch=r=>((r,s)=>{const o=s.request,i=new URL(o.url).pathname;i.endsWith("partytown-sandbox")?s.respondWith(t('<!DOCTYPE html><html><head><meta charset="utf-8"><script type="module" async>(t=>{const e=t=>t.length,r=t=>t&&t.constructor&&t.constructor.name||"",n=()=>{},s=(t,e)=>t.startsWith(e),o=t=>!(s(t,"webkit")||s(t,"toJSON")||s(t,"on")&&t.toLowerCase()===t),i=[],a=new Map,c=new WeakMap,h=[],u=new WeakMap,l=new Map,d=new WeakSet,p=(t,e,r)=>e?("number"!=typeof(r=(t=>{if(t){const e=t.nodeName;return"#document"===e?4:"HTML"===e?5:"HEAD"===e?6:"BODY"===e?7:c.get(t)}return-1})(e))&&f(t,e,r=Math.round(9999999999*Math.random()+7)),r):-1,$=(t,e,r)=>{const n=t.J.document;return 4===e?n:5===e?n.documentElement:6===e?n.head:7===e?n.body:(r=h.find((t=>t[0]===e)))?r[1]:null},f=(t,r,n)=>{if(r&&(h.push([n,r]),c.set(r,n),t.c++,t.c>99))for(t.c=0;;){let t,r,n=h.filter((t=>t[1].nodeType&&!t[1].isConnected));if(!(e(n)>99))break;for(t=0,r=e(h);t<r;t++)if(!h[t][1].isConnected){h.slice(t,1);break}}},m=(t,e,n,s,i,a)=>{if(void 0!==e){if(n=n||new Set,"string"==(s=typeof e)||"number"===s||"boolean"===s||null==e)return[4,e];if("function"===s)return[2];if(Array.isArray(e))return n.has(e)?[0,[]]:(n.add(e),[0,e.map((e=>m(t,e,n)))]);if("object"===s){if(e.nodeType)return[1,{K:t.K,u:e.nodeType,r:p(t,e),C:e.nodeName}];if(e===e.window)return[1,{K:t.K,u:0,r:0}];if(y(r(e)))return[1,{K:t.K,u:7,v$:Array.from(e).map((e=>m(t,e,n)[1]))}];if(i={},!n.has(e))for(a in n.add(e),e)o(a)&&(i[a]=m(t,e[a],n));return[3,i]}}},g=(t,e,r,n,s,o,i)=>{if(r){if(n=r[0],s=r[1],4===n)return s;if(5===n)return w(t,e,s);if(0===n)return s.map((r=>g(t,e,r)));if(1===n)return $(t,s.r);if(3===n){for(i in o={},s)o[i]=g(t,e,s[i]);return o}}},y=t=>"HTMLCollection"===t||"NodeList"===t,w=(t,e,r)=>{let s,o,i=$(t,e);return i?(s=u.get(i),s||u.set(i,s={}),o=s[r],o||(o=I(t,r),s[r]=o),o):n},I=(t,e)=>function(...r){const n=m(t,this),s=m(t,r);t.L.postMessage([4,e,n,s])},S=t=>{const r=t.K,n=t.J,s=n.document,o=s.querySelector(\'script[type="text/partytown"]:not([data-pt-id]):not([data-pt-error])\');if(o){const e=p(t,o,r),n={K:r,r:e};o.dataset.ptId=E(t,e),o.src?n.I=o.src:n.e=o.innerHTML,t.L.postMessage([3,n])}else t.w||(t.w=!0,n.frameElement&&(n.frameElement.partyWinId=r),((t,r)=>{let n=r._ptf,s=0;if(n){for(r._ptf.push=(e,r)=>t.L.postMessage([7,e,m(t,Array.from(r))]);s<e(n);s+=2)r._ptf.push(n[s],n[s+1]);n.length=0}})(t,n),s.dispatchEvent(new CustomEvent("ptinit")))},E=(t,e)=>t.K+"."+e,k=(t,e)=>{let n,s,i,a;for(n in t)o(n)&&(i=t[n],a=typeof i,"function"===a?e[n]=2:"object"===a&&(s=b[r(i)],s&&(e[n]=s)));return e},b={CSSStyleDeclaration:11,DOMStringMap:5,DOMTokenList:6,NamedNodeMap:4,NodeList:7},M=(t,e)=>e[0]in t;(async(t,r)=>{const n=t.parent,s=t.navigator.serviceWorker,o=await s.getRegistration(),c=t=>{const r=t.data,n=r.K,s=l.get(n);s&&(async(t,r)=>{if(r.a)return((t,e)=>new Promise((r=>{a.set(e.A,r),t.postMessage([5,e])})))(t.L,r);const n={A:r.A,K:r.K,n:[]};for(const o of r.H){let r,a,c,h,u,l,d,p=o.r,y=o.b,w=o.z,I=e(w),S=w[I-1],E=o.p||i;try{if(r=$(t,p),r){for(h=0;h<I-1;h++)r=r[w[h]];c=g(t,p,o.h),0===y?("partyWinId"===S&&await new Promise((t=>{u=0,l=setInterval((()=>{(M(r,w)||u>99)&&(clearInterval(l),t()),u++}),40)})),a=r[S]):1===y?r[S]=c:2===y&&(a=r[S].apply(r,c),E.map((e=>{d=e[0][0],a[d]=g(t,p,e[1])})),o.B&&f(t,a,o.B)),"object"==typeof(s=a)&&s&&s.then&&(a=await a,n.x=!0),n.F=m(t,a)}else n.n.push(`Instance ${p} not found`)}catch(t){n.n.push(String(t.stack||t))}}var s;return n})(s,r).then((t=>{o&&o.active&&o.active.postMessage(t)}))},h=t=>{if(!d.has(t)){d.add(t);const e=t.parent,i={K:t.partyWinId=r++,D:e.partyWinId,d:n.partytown,c:0,G:o.scope,I:t.document.baseURI,J:t};l.set(i.K,i),f(i,t,0),f(i,t.history,1),f(i,t.localStorage,2),f(i,t.sessionStorage,3),s.addEventListener("message",c),(t=>{t.L=new Worker(URL.createObjectURL(new Blob([\'(t=>{const e={},r=Symbol(),n=Symbol(),s=Symbol(),o=Symbol(),i=Symbol(),a=Symbol(),c={},$=new WeakMap,u={},h={},l=t=>t.toUpperCase(),d=t=>t.length,p=(t,e)=>setTimeout(t,e),m=[],g="text/partytown",f=\\\'<script src="/~partytown/partytown.js" async defer><\\\\/script>\\\',y=()=>Math.round(9999999999*Math.random()+7),w=(t,e)=>S(t[n],e),S=(t,e,r)=>(r=u[t])?r[e]:void 0,I=(t,e,r)=>E(t[n],e,r),E=(t,e,r,n)=>{(n=u[t]||{})[e]=r,u[t]=n},b=(t,e,r)=>((r=S(t,e))&&p((()=>r.map((t=>t({type:"error"===e?"error":"load"}))))),!!r),T=(t,e)=>{h.f=t,h.g=e},R=t=>new URL(t||"",h.y+""),k=t=>R(w(t,"href")),x=(t,e)=>{try{return fetch(t,{method:"POST",mode:"no-cors",keepalive:!0}),!0}catch(t){return console.error(t),!1}};class M{constructor(t,e,i,c){return this[r]=i||h.K,this[n]=e,this[o]=c,this[a]=void 0,X(this[s]=t,this,[])}}class v extends M{appendChild(t){return this.insertBefore(t,null)}get ownerDocument(){return document}get href(){}set href(t){}insertBefore(t,e){return z(this[r],t),"IFRAME"===(t=Y(this,["insertBefore"],[t,e],m))[o]?(t=>{let e=w(t,1)?"load":"error",r=w(t,e);r&&r.forEach((t=>t({type:"load"})))})(t):"SCRIPT"===t[o]&&h.E([3]),t}get nodeName(){return this[o]}get nodeType(){return this[s]}}class N{constructor(t){(this._=t).forEach(((t,e)=>this[e]=t))}entries(){return this._.entries()}forEach(t,e){this._.forEach(t,e)}item(t){return this[t]}keys(){return this._.keys()}get length(){return d(this._)}values(){return this._.values()}[Symbol.iterator](){return this._[Symbol.iterator]()}}class P extends v{get localName(){return this.nodeName.toLowerCase()}get tagName(){return this.nodeName}}class j extends P{addEventListener(...t){let e=t[0],r=w(this,e)||[];r.push(t[1]),I(this,e,r)}get async(){return!0}set async(t){}get defer(){return!0}set defer(t){}get onload(){let t=w(this,"load");return t&&t[0]||null}set onload(t){I(this,"load",t?[t]:null)}get onerror(){let t=w(this,"error");return t&&t[0]||null}set onerror(t){I(this,"error",t?[t]:null)}}class C extends P{get hash(){return k(this).hash}get host(){return k(this).host}get hostname(){return k(this).hostname}get href(){return k(this)+""}set href(t){I(this,"href",t),V(this,["href"],t)}get origin(){return k(this).origin}get pathname(){return k(this).pathname}get port(){return k(this).port}get protocol(){return k(this).protocol}get search(){return k(this).search}}class O extends URL{assign(){}reload(){}replace(){}}class A extends j{get contentDocument(){return this.contentWindow.document}get contentWindow(){let t,e=w(this,2);return e||(e=q(this,["partyWinId"]),I(this,2,e)),t=new B(0,0,e),t.location=this.src,t}get src(){return w(this,3)||""}set src(t){let e,r,n=new XMLHttpRequest;t=R(t)+"",this.src!==t&&(I(this,3,t),n.open("GET",t,!1),n.send(),r=n.status>199&&n.status<300,I(this,1,r),r&&(e=((t,e)=>`<base href="${t}">`+e.replace(/<script>/g,\\\'<script type="text/partytown">\\\').replace(/<script /g,\\\'<script type="text/partytown" \\\').replace(/text\\\\/javascript/g,g)+f)(t,n.responseText),this[a]?this[a].push([["srcdoc"],G(e)]):V(this,["srcdoc"],e)))}}class B extends M{get document(){return F(9,4,this[r])}get location(){let t=w(this,3);return t||I(this,3,t=new O("about:blank")),t}set location(t){this.location.href=t&&""!==t?t:"about:blank"}get parent(){return F(0,0,h.D)}get self(){return this}get top(){return top}get window(){return this}}class D extends P{get body(){return F(1,7,this[r],"BODY")}get compatMode(){return h.i}get cookie(){return h.j,h.j}set cookie(t){V(this,["cookie"],h.j=t)}createElement(t){t=l(t);const e=this[r],n=y(),s=new(H(t))(1,n,e,t);return s[a]="SCRIPT"===t?[[["type"],G(g)]]:"IFRAME"===t?[[["srcdoc"],G(f)]]:[],s}get createEventObject(){}get currentScript(){return h.f?F(1,h.f,this[r],"SCRIPT"):null}get defaultView(){return t}get documentElement(){return F(1,5,this[r],"HTML")}getElementsByTagName(t){return"BODY"===(t=l(t))?[this.body]:"HEAD"===t?[this.head]:"SCRIPT"===t?[F(1,h.o,this[r],"SCRIPT")]:Y(this,["getElementsByTagName"],[t])}get head(){return F(1,6,this[r],"HEAD")}get implementation(){return{hasFeature:()=>!0}}get location(){return h.y,h.y}set location(t){h.y.href=t+""}get parentNode(){return null}get parentElement(){return null}get readyState(){return"complete"!==h.k?h.k=q(this,["readyState"]):h.k,h.k}get referrer(){return h.l,h.l}get title(){return h.m,h.m}set title(t){V(this,["title"],h.m=t)}}class L extends P{get parentElement(){return document.documentElement}get parentNode(){return document.documentElement}}class W extends j{get src(){return this[r]===h.K?w(this,3)||"":q(this,["src"])}set src(t){this[r]===h.K?(t=R(t)+"",I(this,3,t),this[a]&&this[a].push([["src"],G(t)])):V(this,["src"],t)}get type(){return q(this,["type"])}set type(t){"text/javascript"!==t&&V(this,["type"],t)}}const F=(t,e,r,n)=>new(_(t,n=9===t?"#document":3===t?"#text":n))(t,e,r,n),_=(t,e)=>1===t?H(e):9===t?D:0===t?B:3===t?v:M,H=t=>({A:C,BODY:L,HEAD:L,IFRAME:A,SCRIPT:W}[t]||P),J=(t,i,a,c,$,u)=>{const l=t[r],d=e[l]=e[l]||[],p=h.K!==l,m={r:t[n],u:t[s],C:t[o],b:i,z:a,h:c,p:$,B:u};return d.push(m),U(l,t,a,p,d)},U=(t,e,r,n,s)=>{if(d(s)){const o={A:y(),K:t,a:n,H:[...s]};s.length=0;const i=new XMLHttpRequest;JSON.stringify(o),i.open("POST",h.G+"proxytown",!1),i.send(JSON.stringify(o));const a=JSON.parse(i.responseText),c=a.n.join(),$=a.x,u=K(e,r,a.F);if(c){if($)return Promise.reject(c);throw new Error(c)}return $?Promise.resolve(u):u}},q=(t,e)=>{z(t[r],t);return J(t,0,e)},V=(t,e,r)=>{if(t[a])t[a].push([e,G(r)]);else{const n=G(r);"function"==typeof r&&I(t,e.join("."),r),J(t,1,e,n)}},Y=(t,e,n,s,o)=>{z(t[r],t);return J(t,2,e,G(n),s,o)},z=(t,e)=>{const r=e[a];if(r){e[a]=void 0;const s=F(9,4,t,"#document");Y(s,["createElement"],[e[o]],r,e[n])}},X=(t,e,r)=>!e||"object"!=typeof e&&"function"!=typeof e||e[i]||String(e).includes("[native")?e:new Proxy(e,{get(e,n){if(n===i)return!0;if(Reflect.has(e,n))return Reflect.get(e,n);const s=[...r,String(n)];return((t,e,r)=>{const n=h.t.find((e=>e[0]===t));if(n){const t=n[1][r[d(r)-1]];if(2===t)return(...t)=>Y(e,r,t);if(t>0)return X(t,e,[...r])}const s=w(e,r.join("."));return"function"==typeof s?(...t)=>s.apply(e,t):null})(t,e,s)||q(e,s)},set:(t,e,n,s)=>(Reflect.has(t,e)?Reflect.set(t,e,n,s):V(t,[...r,String(e)],n),!0)}),G=(t,e)=>{if(void 0!==t){e=e||new Set;const u=typeof t;if("string"===u||"boolean"===u||"number"===u||null==t)return[4,t];if("function"===u)return[5,(i=t,(a=$.get(i))||($.set(i,a=y()),c[a]=i),a)];if(Array.isArray(t))return e.has(t)?[0,[]]:[0,t.map((t=>G(t,e)))];if("object"===u){if("number"==typeof t[n])return[1,{K:t[r],u:t[s],r:t[n],C:t[o]}];const i={};if(!e.has(t)){e.add(t);for(const r in t)i[r]=G(t[r],e)}return[3,i]}}var i,a},K=(t,e,r,n,s,o,i)=>{if(r){if(n=r[0],s=r[1],4===n)return s;if(5===n)return Z(t,e,s);if(2===n&&t)return(...r)=>Y(t,e,r);if(1===n)return Q(s);if(0===n)return s.map((r=>K(t,e,r)));if(3===n){for(i in o={},s)o[i]=K(t,[...e,i],s[i]);return o}}},Q=({u:e,r:r,K:n,C:s,v$:o})=>1===r?history:2===r?localStorage:3===r?sessionStorage:0===r?t:7===e?new N(o.map(Q)):F(e,r,n,s),Z=(t,e,r)=>{let n,s=w(t,0);return s||I(t,0,s={}),n=s[r],n||(s[r]=n=tt()),n},tt=t=>function(...t){};class et{constructor(){this.s="",this.l=[],this.e=[]}get src(){return this.s}set src(t){fetch(R(t)+"",{mode:"no-cors",keepalive:!0}).then((t=>{t.ok?this.l.forEach((t=>t({type:"load"}))):this.e.forEach((t=>t({type:"error"})))}),(()=>this.e.forEach((t=>t({type:"error"})))))}addEventListener(t,e){"load"===t&&this.l.push(e),"error"===t&&this.e.push(e)}get onload(){return this.l[0]}set onload(t){this.l=[t]}get onerror(){return this.e[0]}set onerror(t){this.e=[t]}}const rt=[],nt=e=>{const s=e.data,o=s[0],i=s[1],a=s[2];h.w?3===o?(t=>{t.K;let e=t.r,r=t.e,n=t.I,s="",o="load";if(n){try{n=R(n)+"",E(e,3,n),T(e,n),h.q(n)}catch(t){console.error(name,t,"\\\\n"+n),o="error",s=String(t.stack||t)+""}b(e,o)||h.E([8,e,o])}else if(r)try{T(e,""),new Function(r)()}catch(t){console.error(name,t,"\\\\n"+r),o="error",s=String(t.stack||t)+""}T(-1,""),h.E([2,e,s])})(i):4===o?((t,e,r,n)=>{if(n=c[t])try{const t=K(null,[],e),s=K(t,[],r);n.apply(t,s)}catch(t){console.error(t)}})(i,a,s[3]):5===o?(t=>{const e={A:t.A,K:t.K,n:[]};for(const r of t.H){let n,s,o,i,a=r.b,c=r.z,$=d(c),u=c[$-1];try{for(n=Q({...r,K:t.K}),i=0;i<$-1;i++)n=n[c[i]];o=K(n,c,r.h),0===a?s=n[u]:1===a?n[u]=o:2===a&&(s=4===r.r&&"createElement"===u?Y(n,c,o,r.p,r.B):n[u].apply(n,o)),e.F=G(s)}catch(t){e.n.push(String(t.stack||t))}}h.E([6,e])})(i):7===o?((e,r)=>{let n,s=K({},[],r),o=t;e.split(".").forEach(((t,e,r)=>{o&&(n=o[t],e===r.length-1&&"function"==typeof n?n.apply(o,s):o=o[t])}))})(i,a):8===o&&b(i,a):1===o?(((t,e)=>{Object.assign(h,e),h.K,h.K>1&&h.D,h.q=importScripts.bind(t),t.importScripts=void 0,h.E=postMessage.bind(t),t.postMessage=(t,e)=>{JSON.stringify(t)},h.y=new O(e.I),((t,e)=>{t[r]=h.K,t[n]=0,Object.keys(e).forEach((r=>{t[r]||2!==e[r]||(t[r]=(...e)=>Y(t,[r],e))})),t.requestAnimationFrame=t=>p((()=>t(Date.now())),9),t.cancelAnimationFrame=clearTimeout,Object.defineProperty(t,"location",{get:()=>h.y,set:t=>h.y.href=t+""}),t.document=F(9,4),t.history=F(8,1),t.localStorage=F(10,2),t.sessionStorage=F(10,3),t.Image=et,navigator.sendBeacon=x,t.self=t.window=t,1===h.K?t.parent=t.top=t:(t.parent=F(0,0,h.D),t.top=F(0,0,1))})(t,e.t[0][1]),h.w=!0})(t,i),h.E([3]),p((()=>{rt.slice().forEach(nt),rt.length=0}))):rt.push(e)};t.onmessage=nt,postMessage([0])})(self);\\n\'],{type:"text/javascript"})),{name:`Partytown (${t.K}) 🎉`}),t.L.onmessage=e=>((t,e)=>{const r=e[0],n=t.J.document;if(0===r){const e=p(t,n.querySelector("script")),r=((t,e)=>{const r=e.implementation.createHTMLDocument(),n=r.documentElement;return[[0,t],[9,r],[6,n.classList],[1,n],[8,t.history],[7,n.childNodes],[10,t.sessionStorage],[3,r.createTextNode("")]].map((([t,e])=>[t,k(e,{})]))})(t.J,n),s={K:t.K,D:t.D,d:t.d||{},i:n.compatMode,j:n.cookie,k:n.readyState,l:n.referrer,m:n.title,o:e,t:r,G:t.G,I:t.I};t.L.postMessage([1,s])}else if(3===r)S(t);else if(2===r)((t,e,r,n,s)=>{(s=e.querySelector(`[data-pt-id="${E(t,r)}"]`))&&(n?s.dataset.ptError=n:s.type+="-init"),S(t)})(t,n,e[1],e[2]);else if(6===r){const r=e[1],n=a.get(r.A);n&&(a.delete(r.A),n(r),S(t))}else 8===r&&l.forEach((t=>t.L.postMessage(e)))})(t,e.data)})(i),t.addEventListener("load",(()=>S(i)))}};n.partyWin=h,o&&h(n)})(t,1)})(window);\n<\/script></head></html>',0,1)):i.endsWith("proxytown")&&s.respondWith(((r,s)=>new Promise((async o=>{const i=await s.clone().json(),a=await((t,r)=>new Promise((async s=>{const o=[...await t.clients.matchAll()].sort(((t,e)=>t.url>e.url?-1:t.url<e.url?1:0))[0];if(o){const t=[s,setTimeout((()=>{e.delete(r.A),s(n(r,"Timeout"))}),1e4)];e.set(r.A,t),o.postMessage(r)}else s(n(r,"No Party"))})))(r,i);o(t(JSON.stringify(a),1,1))})))(r,o))})(s,r)})(self);